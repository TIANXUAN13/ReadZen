version: '3.8'

services:
  readzen:
    image: tianxuan13/readzen:latest
    container_name: readzen
    restart: unless-stopped
    ports:
      - "15000:15000"
    environment:
      - PORT=15000
      - HOST=0.0.0.0
      - DATA_DIR=/app/data
      # 可选：设置管理员密码（默认为 admin123）
      - ADMIN_PASSWORD=${ADMIN_PASSWORD:-admin123}
      # 可选：设置 Flask secret key
      - SECRET_KEY=${SECRET_KEY:-super-secret-key}
    volumes:
      # 数据持久化：将本地 ./data 目录挂载到容器的 /app/data 目录
      - ./data:/app/data:rw
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:15000/api/daily"]
      interval: 30s
      timeout: 10s
      retries: 3

# 使用说明：
# 1. 创建 data 目录：mkdir data
# 2. 启动服务：docker-compose up -d
# 3. 访问：http://localhost:15000
# 4. 查看日志：docker-compose logs -f
# 5. 停止服务：docker-compose down
